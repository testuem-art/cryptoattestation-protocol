<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoAttestation dApp</title>
    <!-- –ü–û–î–ö–õ–Æ–ß–ê–ï–ú –ë–ò–ë–õ–ò–û–¢–ï–ö–£ ETHERS.js —á–µ—Ä–µ–∑ CDN -->
    <script src="https://cdn.ethers.io/lib/ethers-5.7.umd.min.js" type="application/javascript"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 2rem auto; padding: 1rem; line-height: 1.6; }
        button { padding: 12px 18px; margin: 8px 5px; cursor: pointer; background-color: #4CAF50; color: white; border: none; border-radius: 6px; font-weight: bold; }
        button:disabled { background-color: #cccccc; cursor: not-allowed; }
        input { padding: 10px; margin: 8px 0; width: 100%; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
        .section { margin-bottom: 2rem; padding: 1.5rem; border: 1px solid #e0e0e0; border-radius: 8px; background: #fafafa; }
        #console { background: #2c3e50; color: #ecf0f1; padding: 1.2rem; margin-top: 1.5rem; border-radius: 8px; font-family: monospace; white-space: pre-wrap; max-height: 300px; overflow-y: auto; }
        .status-ok { color: #2ecc71; }
        .status-error { color: #e74c3c; }
        .status-wait { color: #f39c12; }
    </style>
</head>
<body>
    <h1>üöÄ dApp –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏—è–º–∏</h1>
    <p>–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏ Ethereum. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MetaMask –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Ç–æ–π –∂–µ —Å–µ—Ç–∏, –∫—É–¥–∞ –±—ã–ª —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç.</p>

    <div class="section">
        <h2>1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞</h2>
        <button id="connectWallet">üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å MetaMask</button>
        <p>–°—Ç–∞—Ç—É—Å: <span id="walletStatus" class="status-wait">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span></p>
        <p>–°–µ—Ç—å: <span id="networkStatus">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</span></p>
    </div>

    <div class="section">
        <h2>2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏</h2>
        <p><strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –≠—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –≥–∞–∑–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ –±–ª–æ–∫—á–µ–π–Ω.</p>
        <input type="text" id="assetInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Serial-Number-123)">
        <input type="text" id="dataInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Passed-QA-2024)">
        <button id="createAttestation" disabled>‚úÖ –°–æ–∑–¥–∞—Ç—å –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏—é</button>
    </div>

    <div class="section">
        <h2>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π</h2>
        <p>–≠—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∑–∞—Ç—Ä–∞—Ç –≥–∞–∑–∞.</p>
        <input type="text" id="assetQueryInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏">
        <button id="getAttestationCount" disabled>üîç –£–∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</button>
        <button id="getAllAttestations" disabled>üìã –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏</button>
        <div id="attestationResults"></div>
    </div>

    <div id="console"><b>–ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π:</b>\n–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –ø–æ–¥–∫–ª—é—á–∏—Ç–µ MetaMask.\n</div>

    <script>
        // –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø (–í–ê–®–ò –î–ê–ù–ù–´–ï)
        const contractAddress = "0xDA0bab807633f07f013f94DD0E6A4F96F8742B53";
        const contractABI = [{"inputs":[{"internalType":"bytes32","name":"assetHash","type":""bytes32"},{"internalType":"bytes32","name":"dataHash","type":"bytes32"}],"name":"addAttestation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"assetHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"verifier","type":"address"},{"indexed":false,"internalType":"bytes32","name":"dataHash","type":"bytes32"}],"name":"AttestationAdded","type":"event"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"assetAttestations","outputs":[{"internalType":"address","name":"verifier","type":"address"},{"internalType":"bytes32","name":"dataHash","type":"bytes32"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"assetHash","type":"bytes32"}],"name":"getAttestationCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}];

        // –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –°–û–°–¢–û–Ø–ù–ò–ï–ú
        let provider = null;
        let signer = null;
        let contract = null;
        let userAddress = null;
        let currentChainId = null;

        // –≠–õ–ï–ú–ï–ù–¢–´ –ò–ù–¢–ï–†–§–ï–ô–°–ê
        const connectButton = document.getElementById('connectWallet');
        const statusSpan = document.getElementById('walletStatus');
        const networkSpan = document.getElementById('networkStatus');
        const createButton = document.getElementById('createAttestation');
        const countButton = document.getElementById('getAttestationCount');
        const getAllButton = document.getElementById('getAllAttestations');
        const consoleOutput = document.getElementById('console');

        // –§–£–ù–ö–¶–ò–Ø –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
        function logToConsole(message) {
            const timestamp = new Date().toLocaleTimeString('ru-RU');
            consoleOutput.innerHTML += `[${timestamp}] ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        // –§–£–ù–ö–¶–ò–Ø –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–Ø –°–¢–†–û–ö–ò –í –•–≠–®
        function stringToBytes32(inputString) {
            // –ü–†–û–í–ï–†–ö–ê: –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ ethers?
            if (typeof ethers === 'undefined') {
                logToConsole('‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ ethers –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å!');
                throw new Error('Ethers library not loaded');
            }
            return ethers.utils.id(inputString);
        }

        // –§–£–ù–ö–¶–ò–Ø –ü–†–û–í–ï–†–ö–ò –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø METAMASK
        function checkMetaMask() {
            if (typeof window.ethereum === 'undefined') {
                logToConsole("‚ùå –û–®–ò–ë–ö–ê: MetaMask –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.");
                statusSpan.textContent = "MetaMask –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω";
                statusSpan.className = 'status-error';
                connectButton.disabled = true;
                return false;
            }
            return true;
        }

        // –§–£–ù–ö–¶–ò–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –°–¢–ê–¢–£–°–ê –ö–ù–û–ü–û–ö
        function updateButtonStates(isConnected) {
            createButton.disabled = !isConnected;
            countButton.disabled = !isConnected;
            getAllButton.disabled = !isConnected;
        }

        // –û–ë–†–ê–ë–û–¢–ß–ò–ö –ò–ó–ú–ï–ù–ï–ù–ò–Ø –°–ï–¢–ò –í METAMASK
        async function handleChainChanged(chainId) {
            logToConsole("–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ—Ç–∏ –≤ MetaMask...");
            currentChainId = chainId;
            networkSpan.textContent = `ID —Å–µ—Ç–∏: ${chainId}`;
            await setupContract();
        }

        // –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ò –ù–ê–°–¢–†–û–ô–ö–ò
        async function connectAndSetup() {
            if (!checkMetaMask()) return;

            try {
                logToConsole("–ó–∞–ø—Ä–æ—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤...");
                connectButton.disabled = true;
                
                // –ó–∞–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–∫–∫–∞—É–Ω—Ç–∞–º
                const accounts = await window.ethereum.request({ 
                    method: 'eth_requestAccounts' 
                });
                
                userAddress = accounts[0];
                statusSpan.textContent = `–ü–æ–¥–∫–ª—é—á–µ–Ω: ${userAddress.substring(0, 8)}...`;
                statusSpan.className = 'status-ok';
                
                // –ü–†–û–í–ï–†–ö–ê: –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ ethers?
                if (typeof ethers === 'undefined') {
                    throw new Error('–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ ethers –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                }
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–∞
                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ç–∏
                const network = await provider.getNetwork();
                currentChainId = network.chainId.toString();
                networkSpan.textContent = `ID —Å–µ—Ç–∏: ${currentChainId}`;
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
                await setupContract();
                
                // –í–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
                updateButtonStates(true);
                
                logToConsole("‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ! –ö–æ–Ω—Ç—Ä–∞–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.");
                
            } catch (error) {
                logToConsole(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ${error.message}`);
                statusSpan.textContent = "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è";
                statusSpan.className = 'status-error';
                connectButton.disabled = false;
            }
        }

        // –§–£–ù–ö–¶–ò–Ø –ù–ê–°–¢–†–û–ô–ö–ò –ö–û–ù–¢–†–ê–ö–¢–ê
        async function setupContract() {
            try {
                // –ü–†–û–í–ï–†–ö–ê: –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ ethers?
                if (typeof ethers === 'undefined') {
                    throw new Error('–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ ethers –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                }
                
                contract = new ethers.Contract(contractAddress, contractABI, signer);
                logToConsole(`–ö–æ–Ω—Ç—Ä–∞–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ –∞–¥—Ä–µ—Å—É: ${contractAddress}`);
                return true;
            } catch (error) {
                logToConsole(`‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞: ${error.message}`);
                return false;
            }
        }

        // –§–£–ù–ö–¶–ò–Ø –°–û–ó–î–ê–ù–ò–Ø –ê–¢–¢–ï–°–¢–ê–¶–ò–ò
        async function createAttestation() {
            if (!contract) {
                logToConsole("‚ö†Ô∏è –ö–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
                return;
            }

            const assetInput = document.getElementById('assetInput').value.trim();
            const dataInput = document.getElementById('dataInput').value.trim();

            if (!assetInput || !dataInput) {
                logToConsole("‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–∞ –ø–æ–ª—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏");
                return;
            }

            try {
                createButton.disabled = true;
                logToConsole("–°–æ–∑–¥–∞–Ω–∏–µ —Ö—ç—à–µ–π –∏–∑ –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...");
                
                const assetHash = stringToBytes32(assetInput);
                const dataHash = stringToBytes32(dataInput);
                
                logToConsole("–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏...");
                const transaction = await contract.addAttestation(assetHash, dataHash);
                
                logToConsole(`‚è≥ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞: ${transaction.hash}`);
                logToConsole("–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è... (—ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 15-30 —Å–µ–∫—É–Ω–¥)");
                
                const receipt = await transaction.wait();
                logToConsole(`‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –≤ –±–ª–æ–∫–µ ${receipt.blockNumber}!`);
                logToConsole("–ê—Ç—Ç–µ—Å—Ç–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ –±–ª–æ–∫—á–µ–π–Ω!");
                
            } catch (error) {
                logToConsole(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏: ${error.message}`);
            } finally {
                createButton.disabled = false;
            }
        }

        // –§–£–ù–ö–¶–ò–Ø –ü–û–õ–£–ß–ï–ù–ò–Ø –ö–û–õ–ò–ß–ï–°–¢–í–ê –ê–¢–¢–ï–°–¢–ê–¶–ò–ô
        async function getAttestationCount() {
            const assetInput = document.getElementById('assetQueryInput').value.trim();
            
            if (!assetInput) {
                logToConsole("‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–∞");
                return;
            }

            try {
                countButton.disabled = true;
                const assetHash = stringToBytes32(assetInput);
                
                logToConsole("–ó–∞–ø—Ä–æ—Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π...");
                const count = await contract.getAttestationCount(assetHash);
                
                logToConsole(`‚úÖ –ù–∞–π–¥–µ–Ω–æ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π: ${count.toString()}`);
                
            } catch (error) {
                logToConsole(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞: ${error.message}`);
            } finally {
                countButton.disabled = false;
            }
        }

        // –§–£–ù–ö–¶–ò–Ø –ü–û–õ–£–ß–ï–ù–ò–Ø –í–°–ï–• –ê–¢–¢–ï–°–¢–ê–¶–ò–ô
        async function getAllAttestations() {
            const assetInput = document.getElementById('assetQueryInput').value.trim();
            
            if (!assetInput) {
                logToConsole("‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–∞");
                return;
            }

            try {
                getAllButton.disabled = true;
                const assetHash = stringToBytes32(assetInput);
                const resultsDiv = document.getElementById('attestationResults');
                
                logToConsole("–ó–∞–ø—Ä–æ—Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π...");
                const count = await contract.getAttestationCount(assetHash);
                const numCount = count.toNumber();
                
                if (numCount === 0) {
                    resultsDiv.innerHTML = "<p>–ê—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>";
                    logToConsole("–ê—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ");
                    return;
                }
                
                resultsDiv.innerHTML = `<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –∞–∫—Ç–∏–≤–∞ "${assetInput}":</h3>`;
                logToConsole(`–ù–∞–π–¥–µ–Ω–æ ${numCount} –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π. –ó–∞–≥—Ä—É–∑–∫–∞...`);
                
                for (let i = 0; i < numCount; i++) {
                    const attestation = await contract.assetAttestations(assetHash, i);
                    
                    resultsDiv.innerHTML += `
                        <div style="margin: 15px 0; padding: 12px; border: 1px solid #ddd; border-radius: 6px;">
                            <p><strong>–ó–∞–ø–∏—Å—å #${i+1}:</strong></p>
                            <p>–ü—Ä–æ–≤–µ—Ä–∏–ª: ${attestation.verifier}</p>
                            <p>–•—ç—à –¥–∞–Ω–Ω—ã—Ö: ${attestation.dataHash}</p>
                            <p>–í—Ä–µ–º—è: ${new Date(attestation.timestamp * 1000).toLocaleString('ru-RU')}</p>
                        </div>
                    `;
                }
                
                logToConsole(`‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö ${numCount} –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∞`);
                
            } catch (error) {
                logToConsole(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π: ${error.message}`);
            } finally {
                getAllButton.disabled = false;
            }
        }

        // –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í –°–û–ë–´–¢–ò–ô
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ MetaMask –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            if (checkMetaMask()) {
                logToConsole("MetaMask –æ–±–Ω–∞—Ä—É–∂–µ–Ω. –ì–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é.");
            }
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
            connectButton.addEventListener('click', connectAndSetup);
            createButton.addEventListener('click', createAttestation);
            countButton.addEventListener('click', getAttestationCount);
            getAllButton.addEventListener('click', getAllAttestations);
            
            // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ—Ç–∏
            if (window.ethereum) {
                window.ethereum.on('chainChanged', handleChainChanged);
            }
        });
    </script>
</body>
</html>
